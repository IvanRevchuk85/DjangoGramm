{% extends "base.html" %}

{% block title %}–ü—Ä–æ—Ñ–∏–ª—å{% endblock %}

{% block content %}
<div class="container d-flex justify-content-center align-items-center mt-5">
    <div class="col-md-6">
        <div class="card shadow-sm p-4 text-center">
            <h2 class="mb-3">üë§ {{ user.username }}</h2>
            <p><strong>–ü–æ–ª–Ω–æ–µ –∏–º—è:</strong> {{ user.full_name|default:"–ù–µ —É–∫–∞–∑–∞–Ω–æ" }}</p>
            <p><strong>Email:</strong> {{ user.email }}</p>
            <p><strong>–ë–∏–æ–≥—Ä–∞—Ñ–∏—è:</strong> {{ user.bio|default:"–ù–µ —É–∫–∞–∑–∞–Ω–∞" }}</p>

            {% if user.avatar %}
            <img src="{{ user.avatar.url }}" alt="–ê–≤–∞—Ç–∞—Ä" class="img-thumbnail rounded-circle" style="max-width: 150px;">
            {% else %}
            <p class="text-muted">–ê–≤–∞—Ç–∞—Ä –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç</p>
            {% endif %}

            <!-- üîπ –ë–ª–æ–∫ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –∏ –ø–æ–¥–ø–∏—Å–æ–∫ -->
            <div class="mt-3">
                <p><strong>–ü–æ–¥–ø–∏—Å—á–∏–∫–∏:</strong> <span id="followers-count">{{ user.followers_count }}</span></p>
                <p><strong>–ü–æ–¥–ø–∏—Å–∫–∏:</strong> {{ user.following_count }}</p>
            </div>

            <!-- üîπ –§–æ—Ä–º–∞ –ø–æ–¥–ø–∏—Å–∫–∏/–æ—Ç–ø–∏—Å–∫–∏ -->
            {% if request.user != user %}
                {% if request.user in user.followers.all %}
                <form method="post" action="{% url 'users:unfollow_user' user.id %}" class="follow-form d-inline" data-user-id="{{ user.id }}">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-danger">–û—Ç–ø–∏—Å–∞—Ç—å—Å—è</button>
                </form>
                {% else %}
                <form method="post" action="{% url 'users:follow_user' user.id %}" class="follow-form d-inline" data-user-id="{{ user.id }}">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-primary">–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è</button>
                </form>
                {% endif %}
            {% endif %}

            <div class="d-grid gap-2 mt-3">
                <a href="{% url 'users:edit_profile' %}" class="btn btn-primary">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                <a href="{% url 'posts:create_post' %}" class="btn btn-success">‚ûï –°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç</a>
                <a href="{% url 'posts:post_list' %}" class="btn btn-info">üì∞ –õ–µ–Ω—Ç–∞ –ø–æ—Å—Ç–æ–≤</a>
            </div>

            <form method="post" action="{% url 'users:logout' %}" class="mt-3">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger w-100">üö™ –í—ã–π—Ç–∏</button>
            </form>
        </div>
    </div>
</div>
{% endblock %}
